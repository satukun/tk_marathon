# マラソン フォトシステム - カラーパターン

## 概要

本プロジェクトは、CSS変数とTailwind CSSを組み合わせたカラーシステムを採用しています。セマンティックな命名とHSL（Hue, Saturation, Lightness）カラーモデルを使用し、ライト・ダークテーマの両方をサポートしています。

## カラーシステムの基本構造

### CSS変数による定義

すべてのカラーは`globals.css`でCSS変数として定義され、HSL値で管理されています。

```css
:root {
  --background: 0 0% 100%;
  --foreground: 0 0% 3.9%;
  --primary: 0 0% 9%;
  --primary-foreground: 0 0% 98%;
  /* ... */
}
```

### Tailwind CSS統合

Tailwind設定ファイル（`tailwind.config.ts`）で、CSS変数をTailwindクラスとして使用できるよう連携されています。

## カラーパレット詳細

### ライトテーマ（デフォルト）

#### 基本カラー
- **Background**: `hsl(0 0% 100%)` - 純白 (#FFFFFF)
- **Foreground**: `hsl(0 0% 3.9%)` - ダークグレー (#0A0A0A)

#### プライマリカラー
- **Primary**: `hsl(0 0% 9%)` - ダークグレー (#171717)
- **Primary Foreground**: `hsl(0 0% 98%)` - ライトグレー (#FAFAFA)

#### セカンダリカラー
- **Secondary**: `hsl(0 0% 96.1%)` - ライトグレー (#F5F5F5)
- **Secondary Foreground**: `hsl(0 0% 9%)` - ダークグレー (#171717)

#### アクセントカラー
- **Accent**: `hsl(0 0% 96.1%)` - ライトグレー (#F5F5F5)
- **Accent Foreground**: `hsl(0 0% 9%)` - ダークグレー (#171717)

#### ミュート（控えめ）カラー
- **Muted**: `hsl(0 0% 96.1%)` - ライトグレー (#F5F5F5)
- **Muted Foreground**: `hsl(0 0% 45.1%)` - ミディアムグレー (#737373)

#### UIエレメントカラー
- **Card**: `hsl(0 0% 100%)` - 純白 (#FFFFFF)
- **Card Foreground**: `hsl(0 0% 3.9%)` - ダークグレー (#0A0A0A)
- **Border**: `hsl(0 0% 89.8%)` - ライトグレー (#E5E5E5)
- **Input**: `hsl(0 0% 89.8%)` - ライトグレー (#E5E5E5)
- **Ring**: `hsl(0 0% 3.9%)` - ダークグレー (#0A0A0A)

#### システムカラー
- **Destructive**: `hsl(0 84.2% 60.2%)` - レッド系 (#F87171)
- **Destructive Foreground**: `hsl(0 0% 98%)` - ライトグレー (#FAFAFA)

#### チャートカラー
- **Chart 1**: `hsl(12 76% 61%)` - オレンジ系 (#E87A5D)
- **Chart 2**: `hsl(173 58% 39%)` - ティール系 (#2B8065)
- **Chart 3**: `hsl(197 37% 24%)` - ダークブルー系 (#27414F)
- **Chart 4**: `hsl(43 74% 66%)` - イエロー系 (#E6D55A)
- **Chart 5**: `hsl(27 87% 67%)` - オレンジ系 (#E67E22)

### ダークテーマ

#### 基本カラー
- **Background**: `hsl(0 0% 3.9%)` - ダークグレー (#0A0A0A)
- **Foreground**: `hsl(0 0% 98%)` - ライトグレー (#FAFAFA)

#### プライマリカラー
- **Primary**: `hsl(0 0% 98%)` - ライトグレー (#FAFAFA)
- **Primary Foreground**: `hsl(0 0% 9%)` - ダークグレー (#171717)

#### セカンダリ・アクセント・ミュートカラー
- **Secondary**: `hsl(0 0% 14.9%)` - ダークグレー (#262626)
- **Secondary Foreground**: `hsl(0 0% 98%)` - ライトグレー (#FAFAFA)
- **Muted**: `hsl(0 0% 14.9%)` - ダークグレー (#262626)
- **Muted Foreground**: `hsl(0 0% 63.9%)` - ミディアムグレー (#A3A3A3)

#### UIエレメントカラー
- **Card**: `hsl(0 0% 3.9%)` - ダークグレー (#0A0A0A)
- **Card Foreground**: `hsl(0 0% 98%)` - ライトグレー (#FAFAFA)
- **Border**: `hsl(0 0% 14.9%)` - ダークグレー (#262626)
- **Input**: `hsl(0 0% 14.9%)` - ダークグレー (#262626)
- **Ring**: `hsl(0 0% 83.1%)` - ライトグレー (#D4D4D4)

#### システムカラー
- **Destructive**: `hsl(0 62.8% 30.6%)` - ダークレッド (#7F1D1D)
- **Destructive Foreground**: `hsl(0 0% 98%)` - ライトグレー (#FAFAFA)

#### チャートカラー（ダーク版）
- **Chart 1**: `hsl(220 70% 50%)` - ブルー系 (#2563EB)
- **Chart 2**: `hsl(160 60% 45%)` - グリーン系 (#059669)
- **Chart 3**: `hsl(30 80% 55%)` - オレンジ系 (#EA580C)
- **Chart 4**: `hsl(280 65% 60%)` - パープル系 (#9333EA)
- **Chart 5**: `hsl(340 75% 55%)` - ピンク系 (#EC4899)

## Buttonコンポーネントのバリエーション

Buttonコンポーネントでは、以下のバリエーションが定義されています：

### Variant（種類）
- **default**: プライマリボタン（`bg-primary text-primary-foreground hover:bg-primary/90`）
- **destructive**: 削除・危険操作用（`bg-destructive text-destructive-foreground hover:bg-destructive/90`）
- **outline**: アウトラインボタン（`border border-input bg-background hover:bg-accent hover:text-accent-foreground`）
- **secondary**: セカンダリボタン（`bg-secondary text-secondary-foreground hover:bg-secondary/80`）
- **ghost**: ゴーストボタン（`hover:bg-accent hover:text-accent-foreground`）
- **link**: リンクスタイル（`text-primary underline-offset-4 hover:underline`）

### Size（サイズ）
- **default**: `h-10 px-4 py-2`
- **sm**: `h-9 rounded-md px-3`
- **lg**: `h-11 rounded-md px-8`
- **icon**: `h-10 w-10`

## グラデーション・特別な背景

### 背景グラデーション
プロジェクトでは以下のグラデーション背景が使用されています：

```css
bg-gradient-to-b from-background to-muted
```

この設定により、背景色から控えめな色へのグラデーションが適用されます。

### カメラプレビューの背景
カメラプレビュー部分では、ダークグラデーション背景を使用：

```css
bg-gradient-to-br from-gray-900 to-gray-800
```

## iPad Pro向けカスタマイズ

iPad Pro（大画面）向けには、以下のカスタムコンポーネントスタイルが定義されています：

### コンポーネントスタイル
- **ipad-container**: `max-w-7xl mx-auto px-8 py-6`
- **ipad-card**: `p-8 rounded-2xl shadow-lg`
- **ipad-button**: `h-14 px-8 text-lg rounded-xl`
- **ipad-input**: `h-14 text-lg rounded-xl`
- **ipad-select**: `h-14 text-lg rounded-xl`

### フォントサイズ調整
1024px以上の画面では、ベースフォントサイズが18pxに設定されます：

```css
@media screen and (min-width: 1024px) {
  html {
    font-size: 18px;
  }
}
```

## アニメーション・エフェクト

### キーフレームアニメーション
プロジェクトには以下のカスタムアニメーションが定義されています：

- **fadeInUp**: フェードイン＋上昇エフェクト
- **spinIn**: スピン＋スケール＋フェードインエフェクト
- **typing**: タイプライター効果
- **blink-caret**: カーソル点滅効果

### カラーに関連するアニメーション要素
- **Loading Spinner**: `border-primary`カラーを使用
- **Progress Bar**: プライマリカラー系を使用
- **Toast Notifications**: 成功時は緑系、エラー時は`destructive`カラーを使用

## 使用ガイドライン

### セマンティックカラーの使用
- **Primary**: メインアクション、ブランドカラー
- **Secondary**: サブアクション、補助的な要素
- **Accent**: 強調したい要素、ハイライト
- **Muted**: 控えめなテキスト、説明文
- **Destructive**: 削除、エラー、警告

### アクセシビリティ対応
- コントラスト比を考慮したカラー設定
- フォーカスリング（`ring`カラー）の適切な設定
- ダークモード対応による視認性向上

### 一貫性の保持
- CSS変数を使用することで、テーマ全体の一貫性を保持
- セマンティックな命名により、意図が明確な実装を実現
- Tailwind CSSとの統合により、開発効率を向上

このカラーシステムにより、マラソンフォトシステムは統一感のある美しいUIと、優れたユーザビリティを実現しています。

## 実装サンプル

### 基本的なコンポーネント作成例

```tsx
// プライマリボタンの例
<Button className="w-full">
  登録する
</Button>

// アウトラインボタンの例  
<Button variant="outline" className="w-full">
  キャンセル
</Button>

// 危険な操作のボタン
<Button variant="destructive">
  削除
</Button>
```

### カード要素の実装例

```tsx
<Card>
  <CardHeader>
    <CardTitle>参加者情報</CardTitle>
    <CardDescription>登録された参加者の詳細情報</CardDescription>
  </CardHeader>
  <CardContent>
    <div className="space-y-4">
      <div className="p-4 bg-muted rounded-lg">
        <p className="text-sm text-muted-foreground">参加者ID</p>
        <p className="text-lg font-bold">{runnerId}</p>
      </div>
    </div>
  </CardContent>
</Card>
```

### グラデーション背景の使用例

```tsx
// メインページの背景
<main className="min-h-screen bg-gradient-to-b from-background to-muted">
  {/* コンテンツ */}
</main>

// カメラプレビューエリア
<div className="aspect-video bg-gradient-to-br from-gray-900 to-gray-800 rounded-lg">
  {/* カメラコンテンツ */}
</div>
```

### iPad対応コンポーネントの例

```tsx
// iPad向けカスタムスタイル適用
<div className="ipad-container">
  <Card className="ipad-card">
    <CardContent>
      <Button className="ipad-button">
        大きなボタン
      </Button>
      <Input className="ipad-input" placeholder="大きな入力フィールド" />
    </CardContent>
  </Card>
</div>
```

### ローディング状態の実装例

```tsx
// カウントダウン表示
{isCapturing && (
  <div className="absolute inset-0 flex items-center justify-center">
    <div className="bg-black/75 text-white px-8 py-4 rounded-lg backdrop-blur-sm">
      <p className="text-4xl font-bold text-center">{countdown}</p>
    </div>
  </div>
)}

// 分析中の表示
{isAnalyzing && (
  <div className="absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm">
    <div className="text-center text-white">
      <div className="w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
      <p className="text-lg font-semibold">分析中...</p>
    </div>
  </div>
)}

// プライマリカラーのスピナー
<div className="w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"></div>
```

### 成功・エラー表示の実装例

```tsx
// 成功時のメッセージ表示
<div className="flex items-center gap-2 p-4 bg-green-50 text-green-800 rounded-lg">
  <CheckCircle2 className="w-5 h-5" />
  <span>登録が完了しました</span>
</div>

// エラー時のメッセージ表示
<div className="flex items-center gap-2 p-4 bg-destructive/10 text-destructive rounded-lg">
  <AlertCircle className="w-5 h-5" />
  <span>エラーが発生しました</span>
</div>

// 警告時のメッセージ表示
<div className="flex items-center gap-2 p-4 bg-yellow-50 text-yellow-800 rounded-lg">
  <AlertTriangle className="w-5 h-5" />
  <span>注意：この操作は元に戻せません</span>
</div>
```

### フォームコンポーネントの実装例

```tsx
// 入力フィールドとラベル
<div className="space-y-2">
  <Label className="text-sm font-medium">ニックネーム</Label>
  <Input 
    className="border-input bg-background text-foreground" 
    placeholder="ニックネームを入力してください"
  />
</div>

// エラーメッセージ付きフィールド
<div className="space-y-2">
  <Label className="text-sm font-medium">目標タイム</Label>
  <Input 
    className="border-destructive focus-visible:ring-destructive" 
    placeholder="040000"
  />
  <p className="text-sm text-destructive">正しい時間形式で入力してください</p>
</div>

// 選択フィールド
<Select>
  <SelectTrigger className="bg-background border-input">
    <SelectValue placeholder="意気込みを選択してください" />
  </SelectTrigger>
  <SelectContent className="bg-background border-input">
    <SelectItem value="1">完走を目指します！</SelectItem>
    <SelectItem value="2">記録更新に挑戦！</SelectItem>
  </SelectContent>
</Select>
```

## HEXカラーコード早見表

### ライトテーマ
| セマンティック名 | HSL値 | HEX値 | 用途 |
|---|---|---|---|
| Background | `0 0% 100%` | `#FFFFFF` | メイン背景 |
| Foreground | `0 0% 3.9%` | `#0A0A0A` | メインテキスト |
| Primary | `0 0% 9%` | `#171717` | プライマリボタン、アクセント |
| Secondary | `0 0% 96.1%` | `#F5F5F5` | セカンダリボタン、サブエリア |
| Muted | `0 0% 96.1%` | `#F5F5F5` | 控えめな背景 |
| Muted Foreground | `0 0% 45.1%` | `#737373` | 説明テキスト |
| Border | `0 0% 89.8%` | `#E5E5E5` | 境界線 |
| Destructive | `0 84.2% 60.2%` | `#F87171` | エラー、削除 |

### ダークテーマ
| セマンティック名 | HSL値 | HEX値 | 用途 |
|---|---|---|---|
| Background | `0 0% 3.9%` | `#0A0A0A` | メイン背景 |
| Foreground | `0 0% 98%` | `#FAFAFA` | メインテキスト |
| Primary | `0 0% 98%` | `#FAFAFA` | プライマリボタン |
| Secondary | `0 0% 14.9%` | `#262626` | セカンダリエリア |
| Muted | `0 0% 14.9%` | `#262626` | 控えめな背景 |
| Muted Foreground | `0 0% 63.9%` | `#A3A3A3` | 説明テキスト |
| Border | `0 0% 14.9%` | `#262626` | 境界線 |
| Destructive | `0 62.8% 30.6%` | `#7F1D1D` | エラー、削除 |

## アクセシビリティガイドライン

### コントラスト比の確保
- **テキスト**: 4.5:1以上（ノーマルテキスト）、3:1以上（大型テキスト）
- **UI要素**: 3:1以上（ボタン、フォームコントロール）

### カラーアクセシビリティのベストプラクティス
```tsx
// 良い例：コントラストが十分なテキスト
<p className="text-foreground">メインコンテンツ</p>
<p className="text-muted-foreground">補足説明</p>

// 良い例：フォーカス表示の明確化
<Button className="focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2">
  アクセシブルボタン
</Button>
```

### カラーブラインドネス対応
- 色のみに依存せず、アイコンやテキストと組み合わせる
- 成功・エラーの表示では、色以外の視覚的手がかりも提供

```tsx
// 良い例：色とアイコンの組み合わせ
<div className="flex items-center gap-2 text-destructive">
  <AlertCircle className="w-4 h-4" />
  <span>エラーが発生しました</span>
</div>
```

## カスタムカラー追加ガイド

新しいカラーを追加する場合の手順：

### 1. CSS変数の定義（globals.css）
```css
:root {
  --success: 142 76% 36%;
  --success-foreground: 0 0% 98%;
}

.dark {
  --success: 142 84% 47%;
  --success-foreground: 0 0% 9%;
}
```

### 2. Tailwind設定への追加（tailwind.config.ts）
```typescript
colors: {
  // 既存の色...
  success: {
    DEFAULT: 'hsl(var(--success))',
    foreground: 'hsl(var(--success-foreground))',
  },
}
```

### 3. 使用例
```tsx
<Button className="bg-success text-success-foreground hover:bg-success/90">
  成功アクション
</Button>
```

## デバッグ・検証ツール

### カラーパレット確認用コンポーネント
```tsx
const ColorPalette = () => {
  const colors = [
    { name: 'Background', class: 'bg-background text-foreground' },
    { name: 'Primary', class: 'bg-primary text-primary-foreground' },
    { name: 'Secondary', class: 'bg-secondary text-secondary-foreground' },
    { name: 'Accent', class: 'bg-accent text-accent-foreground' },
    { name: 'Muted', class: 'bg-muted text-muted-foreground' },
    { name: 'Destructive', class: 'bg-destructive text-destructive-foreground' },
  ];

  return (
    <div className="grid grid-cols-2 gap-4 p-4">
      {colors.map((color) => (
        <div key={color.name} className={`p-4 rounded-lg ${color.class}`}>
          <h3 className="font-bold">{color.name}</h3>
          <p>サンプルテキスト</p>
        </div>
      ))}
    </div>
  );
};
```

### 実際のプロジェクトで使用されるコンポーネントパターン

```tsx
// 参加者情報表示カード（実際の使用例）
const RunnerInfoCard = ({ runner }) => (
  <Card>
    <CardHeader>
      <CardTitle>検索結果</CardTitle>
      <CardDescription>
        参加者ID: {runner.runnerId}
      </CardDescription>
    </CardHeader>
    <CardContent>
      <div className="grid grid-cols-2 gap-4">
        <div>
          <p className="text-sm font-medium text-muted-foreground">ニックネーム</p>
          <p className="text-lg">{runner.nickname}</p>
        </div>
        <div>
          <p className="text-sm font-medium text-muted-foreground">目標タイム</p>
          <p className="text-lg">{runner.targetTime}</p>
        </div>
      </div>
      <div className="mt-4 p-4 bg-muted rounded-lg">
        <p className="text-sm font-medium text-muted-foreground mb-2">励ましメッセージ</p>
        <p className="text-lg mb-1">{runner.upperPhrase}</p>
        <p className="text-lg">{runner.lowerPhrase}</p>
      </div>
    </CardContent>
  </Card>
);

// 登録完了画面（実際の使用例）
const RegistrationComplete = ({ runnerId }) => (
  <Card className="text-center">
    <CardHeader>
      <div className="flex justify-center mb-4">
        <CheckCircle2 className="w-12 h-12 text-green-500" />
      </div>
      <CardTitle>登録完了</CardTitle>
      <CardDescription>参加者登録が正常に完了しました</CardDescription>
    </CardHeader>
    <CardContent className="space-y-6">
      <div className="p-4 bg-muted rounded-lg">
        <p className="text-sm text-muted-foreground mb-2">参加者ID</p>
        <p className="text-2xl font-bold">{runnerId}</p>
      </div>
      <div className="text-sm text-muted-foreground">
        <p>この番号を必ず保存してください</p>
        <p>撮影時に必要になります</p>
      </div>
    </CardContent>
  </Card>
);

// ナビゲーションヘッダー（実際の使用例）
const NavigationHeader = () => (
  <header className="mb-8 flex-shrink-0">
    <div className="flex items-center gap-2 mb-4">
      <Link href="/" className="flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors">
        <Camera className="w-6 h-6" />
        <span className="text-lg font-semibold">マラソン フォトシステム</span>
      </Link>
    </div>
    <div className="flex justify-between items-center">
      <h1 className="text-3xl font-bold">参加者検索</h1>
      <Button variant="ghost">ホームに戻る</Button>
    </div>
  </header>
);
```

## トラブルシューティング

### よくある問題と解決方法

1. **ダークモードが正しく適用されない**
   - HTML要素に`dark`クラスが適用されているか確認
   - CSS変数の定義が`.dark`スコープに含まれているか確認

2. **カスタムカラーが表示されない**
   - Tailwind設定ファイルの`colors`セクションを確認
   - CSS変数の命名規則（ハイフン区切り）を確認

3. **iPad向けスタイルが適用されない**
   - メディアクエリ`@media screen and (min-width: 1024px)`が有効か確認
   - `ipad-`プレフィックスのクラスが正しく定義されているか確認

このドキュメントは、マラソンフォトシステムのカラーパターンを効率的に活用するための完全ガイドです。開発チーム全体でこのガイドラインに従うことで、一貫性のある美しいUIを構築できます。
